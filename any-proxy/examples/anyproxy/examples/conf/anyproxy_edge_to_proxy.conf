ebpf {
    data linux_raw = r```
        #打开ebpf编译日志
        debug_is_open_ebpf_log  = false
        is_open_ebpf = true
    ```r;
}

tunnel {
    data raw = r```
        is_open_tunnel = true
    ```r;
}

tunnel2 {
    data raw = r```
        #开启多少线程给tunnel2
        tunnel2_worker_thread  = 0  #default 0 (cpu num)
        #每个回源ip使用最大连接数
        tunnel2_max_connect  = 100  #default 100
        is_open_tunnel2 = false
    ```r;
}

common {
    reuseport linux_bool = true ;
}

socket {
}

upstream {
    server {
        #配置名字，可以根据名字来引用配置
        name str = upstream1;
        #负载均衡 weight round_robin random ip_hash ip_hash_active fair
        balancer str = random;
        proxy_pass_tcp raw = r```
            address = "www.upstream.cn:10001"
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_ssl raw = r```
            ssl_domain= "www.example.cn"
            address = "www.upstream.cn:10011"
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_quic raw = r```
            ssl_domain= "www.example.cn"
            address = "www.upstream.cn:10011"
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_tunnel_tcp raw = r```
            tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
            address = "www.upstream.cn:10001"
            #heartbeat = {interval = 10, timeout = 10, fail = 3}
            #dynamic_domain = {interval = 10}
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_tunnel_ssl raw = r```
            tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
            ssl_domain= "www.example.cn"
            address = "www.upstream.cn:10011"
            #heartbeat = {interval = 10, timeout = 10, fail = 3}
            #dynamic_domain = {interval = 10}
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_tunnel_quic raw = r```
            tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
            ssl_domain= "www.example.cn"
            address = "www.upstream.cn:10011"
            #heartbeat = {interval = 10, timeout = 10, fail = 3}
            #dynamic_domain = {interval = 10}
            is_proxy_protocol_hello = true
        ```r;
    }

    server {
        #配置名字，可以根据名字来引用配置
        name str = upstream2;
        #负载均衡 weight round_robin random ip_hash ip_hash_active fair
        balancer str = random;
        proxy_pass_tcp raw = r```
            address = "www.upstream.cn:10002"
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_ssl raw = r```
            ssl_domain= "www.example.cn"
            address = "www.upstream.cn:10012"
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_quic raw = r```
            ssl_domain= "www.example.cn"
            address = "www.upstream.cn:10012"
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_tunnel_tcp raw = r```
            tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
            address = "www.upstream.cn:10002"
            #heartbeat = {interval = 10, timeout = 10, fail = 3}
            #dynamic_domain = {interval = 10}
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_tunnel_ssl raw = r```
            tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
            ssl_domain= "www.example.cn"
            address = "www.upstream.cn:10012"
            #heartbeat = {interval = 10, timeout = 10, fail = 3}
            #dynamic_domain = {interval = 10}
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_tunnel_quic raw = r```
            tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
            ssl_domain= "www.example.cn"
            address = "www.upstream.cn:10012"
            #heartbeat = {interval = 10, timeout = 10, fail = 3}
            #dynamic_domain = {interval = 10}
            is_proxy_protocol_hello = true
        ```r;
    }

    server {
        #配置名字，可以根据名字来引用配置
        name str = upstream3;
        #负载均衡 weight round_robin random ip_hash ip_hash_active fair
        balancer str = random;
        proxy_pass_tcp raw = r```
            address = "www.upstream.cn:10013"
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_ssl raw = r```
            ssl_domain= "www.example.cn"
            address = "www.upstream.cn:10003"
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_quic raw = r```
            ssl_domain= "www.example.cn"
            address = "www.upstream.cn:10003"
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_tunnel_tcp raw = r```
            tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
            address = "www.upstream.cn:10013"
            #heartbeat = {interval = 10, timeout = 10, fail = 3}
            #dynamic_domain = {interval = 10}
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_tunnel_ssl raw = r```
            tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
            ssl_domain= "www.example.cn"
            address = "www.upstream.cn:10003"
            #heartbeat = {interval = 10, timeout = 10, fail = 3}
            #dynamic_domain = {interval = 10}
            is_proxy_protocol_hello = true
        ```r;
        proxy_pass_tunnel_quic raw = r```
            tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
            ssl_domain= "www.example.cn"
            address = "www.upstream.cn:10003"
            #heartbeat = {interval = 10, timeout = 10, fail = 3}
            #dynamic_domain = {interval = 10}
            is_proxy_protocol_hello = true
        ```r;
    }
     server {
         #配置名字，可以根据名字来引用配置
         name str = upstream4;
         #负载均衡 weight round_robin random ip_hash ip_hash_active fair
         balancer str = random;
         proxy_pass_tcp raw = r```
             address = "www.upstream.cn:10014"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_ssl raw = r```
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10004"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_quic raw = r```
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10004"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_tcp raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             address = "www.upstream.cn:10014"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_ssl raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10004"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_quic raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10004"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
     }



    server {
         #配置名字，可以根据名字来引用配置
         name str = upstream5;
         #负载均衡 weight round_robin random ip_hash ip_hash_active fair
         balancer str = random;
         proxy_pass_tcp raw = r```
             address = "www.upstream.cn:10101"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_ssl raw = r```
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10111"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_quic raw = r```
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10111"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_tcp raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             address = "www.upstream.cn:10101"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_ssl raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10111"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_quic raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10111"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
     }



    server {
         #配置名字，可以根据名字来引用配置
         name str = upstream6;
         #负载均衡 weight round_robin random ip_hash ip_hash_active fair
         balancer str = random;
         proxy_pass_tcp raw = r```
             address = "www.upstream.cn:10112"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_ssl raw = r```
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10102"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_quic raw = r```
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10102"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_tcp raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             address = "www.upstream.cn:10112"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_ssl raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10102"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_quic raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10102"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
     }


    server {
         #配置名字，可以根据名字来引用配置
         name str = upstream7;
         #负载均衡 weight round_robin random ip_hash ip_hash_active fair
         balancer str = random;
         proxy_pass_tcp raw = r```
             address = "www.upstream.cn:10113"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_ssl raw = r```
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10103"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_quic raw = r```
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10103"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_tcp raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             address = "www.upstream.cn:10113"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_ssl raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10103"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_quic raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10103"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
     }


    server {
         #配置名字，可以根据名字来引用配置
         name str = upstream8;
         #负载均衡 weight round_robin random ip_hash ip_hash_active fair
         balancer str = random;
         proxy_pass_tcp raw = r```
             address = "www.upstream.cn:10201"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_ssl raw = r```
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10202"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_quic raw = r```
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10202"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_tcp raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             address = "www.upstream.cn:10201"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_ssl raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10202"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_quic raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10202"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
     }





    server {
         #配置名字，可以根据名字来引用配置
         name str = upstream9;
         #负载均衡 weight round_robin random ip_hash ip_hash_active fair
         balancer str = random;
         proxy_pass_tcp raw = r```
             address = "www.upstream.cn:10301"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_ssl raw = r```
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10302"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_quic raw = r```
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10302"
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_tcp raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             address = "www.upstream.cn:10301"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_ssl raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10302"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
         proxy_pass_tunnel_quic raw = r```
             tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
             ssl_domain= "www.example.cn"
             address = "www.upstream.cn:10302"
             #heartbeat = {interval = 10, timeout = 10, fail = 3}
             #dynamic_domain = {interval = 10}
             is_proxy_protocol_hello = true
         ```r;
     }

     server {
          #配置名字，可以根据名字来引用配置
          name str = upstream10;
          #负载均衡 weight round_robin random ip_hash ip_hash_active fair
          balancer str = random;
          proxy_pass_tcp raw = r```
              address = "www.upstream.cn:10401"
              is_proxy_protocol_hello = true
          ```r;
          proxy_pass_ssl raw = r```
              ssl_domain= "www.example.cn"
              address = "www.upstream.cn:10402"
              is_proxy_protocol_hello = true
          ```r;
          proxy_pass_quic raw = r```
              ssl_domain= "www.example.cn"
              address = "www.upstream.cn:10402"
              is_proxy_protocol_hello = true
          ```r;
          proxy_pass_tunnel_tcp raw = r```
              tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
              address = "www.upstream.cn:10401"
              #heartbeat = {interval = 10, timeout = 10, fail = 3}
              #dynamic_domain = {interval = 10}
              is_proxy_protocol_hello = true
          ```r;
          proxy_pass_tunnel_ssl raw = r```
              tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
              ssl_domain= "www.example.cn"
              address = "www.upstream.cn:10402"
              #heartbeat = {interval = 10, timeout = 10, fail = 3}
              #dynamic_domain = {interval = 10}
              is_proxy_protocol_hello = true
          ```r;
          proxy_pass_tunnel_quic raw = r```
              tunnel = { max_stream_size = 5, min_stream_cache_size = 50, channel_size = 64}
              ssl_domain= "www.example.cn"
              address = "www.upstream.cn:10402"
              #heartbeat = {interval = 10, timeout = 10, fail = 3}
              #dynamic_domain = {interval = 10}
              is_proxy_protocol_hello = true
          ```r;
      }
}

http {
    debug_is_open_stream_work_times bool = true;
    access raw = r```
        #如果没有配置就继承父类的配置
        [[access]]
            #default true
            access_log = true
            #default "./logs/access.log"
            access_log_file = "./logs/access.log"
            #default
            access_format = "[${local_time}] ${total_read_size} ${total_write_size} ${write_max_block_time_ms} ${buffer_cache} ${upstream_dispatch} ${is_proxy_protocol_hello} ${is_open_ebpf} ${local_protocol} -> ${upstream_protocol} ${request_id} ${client_addr} ${remote_addr} ${local_addr} ${upstream_addr} ${domain} ${upstream_host} ${status} ${status_str} ${is_timeout_exit} ${session_time} ${upstream_connect_time} ${client_bytes_received} ${upstream_bytes_sent} ${upstream_bytes_received} ${client_bytes_sent} ${upstream_curr_stream_size} ${upstream_max_stream_size} ${upstream_min_stream_cache_size} [${stream_work_times}]"
            #default false
            access_log_stdout = true
    ```r;
#http->tcp, tcp->http
#curl http://www.example.cn:20001 -k -v
    server {
        domain str = "www.example.cn";
        port_listen_tcp raw = r```
            address = "0.0.0.0:20001"
        ```r;
        proxy_pass_upstream str = "upstream1";
        local {
        }
    }

#https->tcp, tcp->https
#curl https://www.example.cn:20002 -k -v
    server {
        domain str = "www.example.cn";
        port_listen_tcp raw = r```
            address = "0.0.0.0:20002"
        ```r;
        proxy_pass_upstream str = "upstream2";
        local {
        }
    }

#https->ssl, http->http
#curl https://www.example.cn:20003 -k -v
    server {
        port_listen_ssl raw = r```
            address = "0.0.0.0:20003"
            ssl = {key = "./cert/www.example.cn.key.pem", cert = "./cert/www.example.cn.cert.pem", ssl_domain = "www.example.cn"}
        ```r;
        port_listen_quic raw = r```
            address = "0.0.0.0:20003"
            ssl = {key = "./cert/www.example.cn.key.pem", cert = "./cert/www.example.cn.cert.pem", ssl_domain = "www.example.cn"}
        ```r;
        proxy_pass_upstream str = "upstream3";
        local {
        }
    }

#https->ssl, http->https
#curl https://www.example.cn:20004 -k -v
    server {
        port_listen_ssl raw = r```
            address = "0.0.0.0:20004"
            ssl = {key = "./cert/www.example.cn.key.pem", cert = "./cert/www.example.cn.cert.pem", ssl_domain = "www.example.cn"}
        ```r;
        port_listen_quic raw = r```
            address = "0.0.0.0:20004"
            ssl = {key = "./cert/www.example.cn.key.pem", cert = "./cert/www.example.cn.cert.pem", ssl_domain = "www.example.cn"}
        ```r;
        proxy_pass_upstream str = "upstream4";
        local {
        }
    }


#https->tcp, https->https
#curl https://www.example.cn:20101 -k -v
    server {
        domain str = "www.example.cn";
         domain_listen_tcp raw = r```
            address = "0.0.0.0:20101"
        ```r;
        proxy_pass_upstream str = "upstream5";
        local {
        }
    }

#https->ssl, http->http
#curl https://www.example.cn:20102 -k -v
    server {
        domain str = "www.example.cn";
        domain_listen_ssl raw = r```
            address = "0.0.0.0:20102"
            ssl = {key = "./cert/www.example.cn.key.pem", cert = "./cert/www.example.cn.cert.pem"}
        ```r;
        domain_listen_quic raw = r```
            address = "0.0.0.0:20102"
            ssl = {key = "./cert/www.example.cn.key.pem", cert = "./cert/www.example.cn.cert.pem"}
        ```r;
        proxy_pass_upstream str = "upstream6";
        local {
        }
    }

#https->ssl, http->https
#curl https://www.example.cn:20103 -k -v
    server {
        domain str = "www.example.cn";
        domain_listen_ssl raw = r```
            address = "0.0.0.0:20103"
            ssl = {key = "./cert/www.example.cn.key.pem", cert = "./cert/www.example.cn.cert.pem"}
        ```r;
        domain_listen_quic raw = r```
            address = "0.0.0.0:20103"
            ssl = {key = "./cert/www.example.cn.key.pem", cert = "./cert/www.example.cn.cert.pem"}
        ```r;
        proxy_pass_upstream str = "upstream7";
        local {
        }
    }

#http(http1.0 http1.1 http2.0)->http, http->(http1.1,https1.1)
#curl http://www.example.cn:20201 -k -v

#https(https1.0 https1.1 https2.0)->https, http->(http1.1,https1.1)
#curl https://www.example.cn:20202 -k -v
    server {
        domain str = "www.example.cn";
        http_server_proxy raw = r```
            #version: http1.1 http2.0 auto
            proxy_pass = {version = "http1.1"}
        ```r;
         domain_listen_tcp raw = r```
            address = "0.0.0.0:20201"
        ```r;
        domain_listen_ssl raw = r```
            address = "0.0.0.0:20202"
            ssl = {key = "./cert/www.example.cn.key.pem", cert = "./cert/www.example.cn.cert.pem"}
        ```r;
        domain_listen_quic raw = r```
            address = "0.0.0.0:20202"
            ssl = {key = "./cert/www.example.cn.key.pem", cert = "./cert/www.example.cn.cert.pem"}
        ```r;
        proxy_pass_upstream str = "upstream8";
        local {
        }
    }


#http(http1.0 http1.1 http2.0)->http, http->(http2.0,https2.0)
#curl http://www.example.cn:20301 -k -v

#https(https1.0 https1.1 https2.0)->https, http->(http2.0,https2.0)
#curl https://www.example.cn:20302 -k -v
    server {
        domain str = "www.example.cn";
        http_server_proxy raw = r```
            #version: http1.1 http2.0 auto
            proxy_pass = {version = "http2.0"}
        ```r;
         domain_listen_tcp raw = r```
            address = "0.0.0.0:20301"
        ```r;
        domain_listen_ssl raw = r```
            address = "0.0.0.0:20302"
            ssl = {key = "./cert/www.example.cn.key.pem", cert = "./cert/www.example.cn.cert.pem"}
        ```r;
        domain_listen_quic raw = r```
            address = "0.0.0.0:20302"
            ssl = {key = "./cert/www.example.cn.key.pem", cert = "./cert/www.example.cn.cert.pem"}
        ```r;
        proxy_pass_upstream str = "upstream9";
        local {
        }
    }


r###
curl -vk -H "host:www.example.cn" -H "Upgrade: websocket" -H "Sec-WebSocket-Version: 13" -H "Sec-WebSocket-Key:13" -H "Connection: Upgrade" http://www.example.cn:20401
curl -vk -H "host:www.example.cn" -H "Upgrade: websocket" -H "Sec-WebSocket-Version: 13" -H "Sec-WebSocket-Key:13" -H "Connection: Upgrade" https://www.example.cn:20402
###r
    server {
        domain str = "www.example.cn";
        http_server_proxy_websocket raw = r```
        ```r;
        domain_listen_tcp raw = r```
            address = "0.0.0.0:20401"
        ```r;
        domain_listen_ssl raw = r```
            address = "0.0.0.0:20402"
            ssl = {key = "./cert/www.example.cn.key.pem", cert = "./cert/www.example.cn.cert.pem"}
        ```r;
        proxy_pass_upstream str = "upstream10";
        local {
        }
    }
}



r###
http:
curl http://www.example.cn:19090 -v
https:
curl https://www.example.cn:19091 -k -v
http2:
curl --http2-prior-knowledge http://www.example.cn:19092 -k -v
###r